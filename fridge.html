<!DOCTYPE html>

<!--
    Brendan Gibbons
    CMPT 330 111
    Professor Tokash

    March 10, 2023

    BG The Fridge App

-->

<html lang="en-us">

<head>
    <meta charset="utf-8">
    <title>Welcome to The Fridge!</title>

    <style>
        :root {
            
            /* background-image: radial-gradient(circle at 100%, #1e1e1e 65%, #2e2e2e); */
            color: black;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 
                Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        header {
            width: 100%;
            height: 15dvh;
        }

        footer {
            position: fixed;

            width: 100%;
            height: 5dvh;
            bottom: 0;
        }

        /* Class-defined CSS Styles */

        #titleBar {
            text-align: center;
            border-bottom: 3px solid #fefefe;
        }

        #titleBar > h1 {
            letter-spacing: 2px;
            
        }

        #titleBar > span {
            letter-spacing: 4px;
        }

        /* Navigation and Controls */

        #powerIcon {
            width: 24px;
            vertical-align: middle;
        }

        #powerButtons {
            vertical-align: middle;
        }

        button {
            background-color: #2e2e2e;
            border: 2px solid #000000;
            border-radius: 4px;
            color: #fefefe;
            height: calc(inherit - .25%);
            padding: 4px;

            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 
                Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        button:hover {
            background-color: #505050;
            cursor: pointer;

            transition: all .2s ease-in-out;
        }

        button:active {
            background-color:#686868;
            border-color: #1e1e1e;
            inset: 4px;

            transition: all .1s linear;
        }

        #controls {
            vertical-align: middle;
        }

        /* Temperature and Time Information */

        #tempBox {
            font-weight: bold;

            font-size: large;
            float: right;
        }

        #temperatureBoxText {
            text-align: right;
        }

        /* Fridge Layout - Left Side*/

        #fridge {
            max-width: 45vw;
            /* https://stackoverflow.com/questions/36253760/how-to-limit-max-width-and-height-to-screen-size-in-css */
            max-height: 70vh;
            float: left;
        }

        #fridgeImage {
            opacity: 0;
            max-width: 100%;
            max-height: inherit;
        }

        /* 
            Entertainment Layout - Right Side 

            I was trying to get the scaling of the right side to work properly, but I 
            could not get it to work the way I wanted to, hence why there is all the empty 
            space on larger displays.

            If you could offer any suggestions on how I could fix this and make other improvements,
            that would be extremely helpful! Something about this makes me think I can do more 
            if time is not a concern, and that this mini-project could make a good basis to learn
            more about CSS, HTML, and Javascript, especially with some of the things I already
            tried that I haven't before.
        */

        #entertainmentColumn {
            float: right;

            padding-right: 8px;

            max-width: 50vw;

            max-height: 70vh;
        }


        /* Television Set */

        #televisionSet {
            background-color: #0a0a0a;
            opacity: 0;
            margin-top: 8px;
            padding: 8px 4px 4px 4px;

            max-width: 100%;
            max-height: 40vh;
        }

        #tv\.app {
            width: 100%;
            height: 100%;
        }
        
        #televisionImage {
            text-align: center;
            width: 100%;
            height: 100%;
            border: none;

            overflow: hidden;
            
        }

        /* Web Browser (Which really just acts as a search box for Google) */

        #browser {
            background-color: inherit;
            color: inherit;
            
            position: relative;
            top: 30%;


            width: 100%;

            text-align: center;
            vertical-align: middle;
        }

        #googleLogo {
            shape-rendering: crispEdges;
            width: 30%;

            text-align: center;
        }


        #searchBarInput {
            background-color: #2e2e2e;
            border: 2px solid #000000;
            border-radius: 4px;
            color: #fefefe;
            height: 3.5%;
            padding: 4px;

            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 
                Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;

            width: 75%;
        }

        #searchBarInput:hover {
            background-color: #505050;
            cursor: text;

            transition: all .2s ease-in-out;
        }

        #searchBarInput:active {
            background-color:#686868;
            border-color: #1e1e1e;
            inset: 4px;

            transition: all .1s linear;
        }

        #searchButtonButton {
            width: 5%;
        }
        
        /* Footer Contents */

        #footerContents {
            border-top: 3px solid #fefefe;
            padding: 8px;
        }

        #footerText {
            float: left;
        }

        #credits {
            float: right;
            text-align: right;
        }



        #controlBar > button {
            height: 100%;

            vertical-align: middle;
        }



        #informationBar {
            width: 100%;
            height: 2%;

            display: flex;
            flex-direction: row;
            justify-content: flex-end;
            align-items: center;

            padding: .5% 0% .5% 0%;
        }

        #timeText {
            padding-inline-start: 1%;
        }

        #fridgeDisplayUnit {
            width: 100%;
        }

        #screen {
            height: 100%;
            width: 100%;

            background-color: #1e1e1e;
            color: #fefefe;

            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
        }
        
        #screenContents {
            display: flex;
            flex-direction: row;
            
            position: relative;
            top: 2%;
            left: 0%;

            height: 90%;
   
        }

        .leftGrid {
            float: left;
            
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            vertical-align: middle;


            width: 45%;
            height: 95%;

            margin-left: 1%;
        }

        .rightGrid {
            float: right;

            display: flex;
            flex-direction: row;
            align-items: center;
            text-align: center;
            vertical-align: middle;

            width: 45%;
            height: 95%;
            margin-right: 1%;
        }

        #calendar {
            background-color:#ffffff;
            border-radius: 5%;
            border-color: #1e1e1e;

            color: #0a0a0a;

            inset: 4px;

            transition: all .1s linear;
        }

        #calendar > table {
            width: 100%;
            height: 75%;
            text-align: center;
            border-width: 2%;
        }

        #calendar .today {
            background-color: lightskyblue;
            border-radius: 100%;
        }

        #calendarBottomDivider {
            border-top: .25% solid #1e1e1e;

            width: 98%
        }
        
        #controlBar {
            position:relative;
            bottom: 0;

            width: 100%;
            height: 7%;

            background-color: #000000;

        }

        .activeApp {
            
        }

        .hidden {
            opacity: 0%;
            display: none;
        }

        .collapsed {
            height: 0px;
            display: none;
        }

        .grid {
            border: 1px solid limegreen;
        }

        .appBlock {
            width: .333;
            
            border-radius: 5%;
            
            width: 2%;
            height: 2%;

            text-align: center;
        }

        .appBlock:hover {
            background-color: #505050;
            cursor: pointer;

            transition: all .2s ease-in-out;
        }

        .appBlock:active {
            background-color:#686868;
            border-color: #1e1e1e;
            inset: 4px;

            transition: all .05s linear;
        }

        .appIcon {
            width: 33.3333%;
        }

        #menu {
            vertical-align: middle;
        }

        .circularControlButton {
            border-radius: 100%;
            padding: 0% .4% 0% .4%;
        }

        #dateAndEvents {
            display: flex;
            flex-direction: row;

            padding-left: 5%;
            width: 100%;
            height: 20%;

            font-size: clamp(1rem, 2.25vw, 3.5rem);
        }

        #date {
            background-color:#fefefe;
            border: 2px solid #1e1e1e;
            border-top: clamp(.1rem, 1vw, 1.75rem) ridge red;
            border-radius: 10%;
            
            width: 15%;
            height: 65%;

            text-align: center;
            vertical-align: middle;

            font-size: clamp(1rem, 3.5vw, 4rem);
            font-weight: bold;
        }

        #eventText {
            padding-left: 5%;
        }

        #web\.app {
            width: 100%;
        }

        #browserTabs {
            display: flex;
            flex-direction: row;
            
            background-color: #686868;
            
            height: 8%;
            width: 100%;

            vertical-align:middle;

        }

        .browserNavButton {
            padding: .5%;
            height: 80%;
        }

        #browserUrlBar {
            border-radius: 5%;
            background-color: #adadad;
            color: #ffffff;

            width: 75dvw;
            
            display: flex;
            flex-direction: row;

            vertical-align: middle;
        }

        #browserUrlBarInput {
            border: none;
            background-color: inherit;
            color: inherit;

            width: 90%;

        }

        #spotify\.app {
            width: 100%;
            height: 100%;
        }

        #spotifyInterface {
            width: 100%;
            height: 100%;

            display: flex;
            flex-direction: column;

            text-align: center;
            align-content: center;
        }


        #albumInformation {    
            width: 100%;
            height: 80%;

            display: flex;
            flex-direction: column;

            text-align: center;
            align-items: center;
        }

        #spotifySongTitle {
            padding: 3%;
        }

        #spotifyCoverArt {
            width: 15%;
            border-radius: 10%;
        }

        #spotifyControls {
            width: 100%;
            height: 10%;
        }

        .mediaControl {
            background-color: #e6e6e6;
            border-radius: 100%;
            image-rendering: crisp-edges;

            margin: .5%;

            max-height: 100%;

        }
        
    </style>
</head>

<body onload="setTimers(); scaleDisplay();" onresize="scaleDisplay();">

    <header>
        <div id="titleBar">
            <span>WELCOME TO</span>
            <h1>The Fridge</h1>
        </div>
        <br>
    </header>

    <main id="fridgeDisplayUnit">

        <div id="screen">
        
            <div id="informationBar">
                <span id="weatherConditions" title=""></span>
                <span id="outsideWeatherDisplay" onclick="toggleTemperatureUnits();"> 
                    <span id="temperatureBoxText" title="Obtained from the NWS KPOU observation center">
                        Getting the temperature...</span> &#x00b0; <span class="temperatureUnits">F</span>
                </span>
                <span id="timeText" onclick="toggle12HourTime();">0:00:00 am</span>
            </div>

            <div id="screenContents">
                <div id="home" class="activeApp">
                    <div id="calendar" class="leftGrid">
                        <table>
                            <tr>
                                <th>S</th>
                                <th>M</th>
                                <th>T</th>
                                <th>W</th>
                                <th>T</th>
                                <th>F</th>
                                <th>S</th>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>1</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>3</td>
                                <td>4</td>
                                <td class="today">5</td>
                                <td>6</td>
                                <td>7</td>
                                <td>8</td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td>10</td>
                                <td>11</td>
                                <td>12</td>
                                <td>13</td>
                                <td>14</td>
                                <td>15</td>
                            </tr>
                            <tr>
                                <td>16</td>
                                <td>17</td>
                                <td>18</td>
                                <td>19</td>
                                <td>20</td>
                                <td>21</td>
                                <td>22</td>
                            </tr>
                            <tr>
                                <td>23</td>
                                <td>24</td>
                                <td>25</td>
                                <td>26</td>
                                <td>27</td>
                                <td>28</td>
                                <td>29</td>
                            </tr>
                            <tr>
                                <td>30</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>

                        <hr id="calendarBottomDivider">

                        <div id="dateAndEvents">
                            <div id="date">
                                5
                            </div>
                            <span id="eventText">No events today</span>
                        </div>
                        

                    </div>
        
                    <div id="menu" class="rightGrid">
                        <table id="menuAppIcons">
                            <tr>
                                <td class="appBlock" onclick="switchApps('spotify.app');">
                                    <img src="img/Spotify_Logo_RGB_Green.png" alt="Spotify" class="appIcon"
                                        ><br>
                                    <span>Spotify</span>
                                </td>
                                <td class="appBlock">
                                    <img src="img/Sun.png" alt="Weather" class="appIcon"><br>
                                    <span>Weather</span>
                                </td>
                                <td class="appBlock" onclick="switchApps('tasks.app');">
                                    <img src="img/Tasks.png" alt="Tasks" class="appIcon"><br>
                                    <span>Tasks</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="appBlock" onclick="switchApps('web.app');">
                                    <img src="img/Internet.png" alt="Web Browser" class="appIcon"><br>
                                    <span>Web Browser</span>
                                </td>
                                <td class="appBlock" onclick="switchApps('timer.app');">
                                    <img src="img/Timer.png" alt="Timer" class="appIcon"><br>
                                    <span>Timer</span>
                                </td>
                                <td class="appBlock" onclick="switchApps('tv.app'); tvLoadPrep();">
                                    <img src="img/TV.png" alt="Television" class="appIcon"><br>
                                    <span>Television</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="appBlock">
                                    <img src="img/Settings.png" alt="Settings" class="appIcon"><br>
                                    <span>Settings</span>
                                </td>
                                <td class=""> </td>
                                <td class=""> </td>
                            </tr>
                        </table>
                    </div>
        
                    <br style="clear: both;">
                </div>

                <div id="spotify.app" class="hidden">
                    <audio id="spotifyMusicSource" src="audio/freestylemix_-_hisboyelroy_-_Revolve.mp3" preload></audio>
                    <div id="spotifyInterface">
                        <div id="albumInformation">
                            <span id='spotifySongTitle'>Revolve - cinematrik</span>
                            <img id='spotifyCoverArt' src="img/spotify.app/spotify_defaultCover.png" alt="Song Cover Art">
                            <br>
                        </div>
                        <div id="spotifyControls">
                            <img id='spotifySkipToPreviousButton' src="img/mediaControl/control_Previous.png" alt="Go Back to the Previous Song"
                                class="mediaControl">
                            <img id='spotifySeekBackwardButton' src="img/mediaControl/control_skipBack.png" alt="Seek Backward 10 Seconds"
                                class="mediaControl">
                            <img id='spotifyPlayButton' src="img/mediaControl/control_Play.png" alt="Play Music" class="mediaControl"
                                onclick="spotifyPlayPause();">
                            <img id='spotifySeekForwardButton' src="img/mediaControl/control_skipForward.png" alt="Seek Forward 10 Seconds"
                                class="mediaControl">
                            <img id='spotifySkipToNextButton' src="img/mediaControl/control_Next.png" alt="Skip to the Next Song"
                                class="mediaControl">
                        </div>
                    </div>
                </div>

                <div id="tasks.app" class="hidden">
                    <div id="currentTaskList" class="leftGrid hidden">
                        <table>
                            <tr>
                                
                            </tr>
                            <tr>

                            </tr>
                            <tr>

                            </tr>
                            <tr>

                            </tr>
                            <tr>

                            </tr>
                            <tr>

                            </tr>
                            <tr>

                            </tr>
                        </table>
                    
                        <hr id="calendarBottomDivider">


                    
                    
                    </div>
                    
                    <div id="taskListSet" class="rightGrid">
                        <table id="taskListCollection">
                            <tr>
                                <td class="selectionList" onclick="switchApps('spotify.app');">
                                    <img src="img/Spotify_Logo_RGB_Green.png" alt="Spotify" class="appIcon"><br>
                                    <span>Spotify</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="selectionList" onclick="switchApps('web.app');">
                                    <img src="img/Internet.png" alt="Web Browser" class="appIcon"><br>
                                    <span>Web Browser</span>
                                </td>
                            </tr>
                            <tr>
                                <td class=""> </td>
                            </tr>
                        </table>
                    </div>
                    
                    <br style="clear: both;">
                </div>

                <div id="web.app" class="hidden">
                    <div id="browserTabs">
                        <img src="img/web.app/browser_home.png" alt="Home Button" class="browserNavButton">
                        <img src="img/web.app/browser_newTab.png" alt="New Browser Tab Button" class="browserNavButton">
                        <img src="img/web.app/browser_back.png" alt="Previous Page Button" class="browserNavButton">
                        <img src="img/web.app/browser_forward.png" alt="Next Page Button" class="browserNavButton">
                        <div id='browserUrlBar'> 
                            <img src="img/web.app/browser_security_HTTPSSecure.png" alt="HTTPS Secure Connection" class="browserNavButton">
                            <input type="text" id="browserUrlBarInput" value="https://www.google.com"> 
                        </div>
                        
                        <img src="img/web.app/browser_refresh.png" alt="Refresh Button" class="browserNavButton">
                        
                    </div>
                    <div id="browser">
                        <img id="googleLogo" src="https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png"
                            alt="Google Search Logo"><br>
                        <br>
                        <input id="searchBarInput" type="text" title="Search Google" placeholder="Search">
                        <button id="searchBarButton" onclick="search();">&#x1f50d; Search</button>
                    </div>
                </div>

                <div id="tv.app" class="hidden">
                    <iframe id="televisionImage" src="https://youtube.com/embed/jfKfPfyJRdk"></iframe>
                </div>

                <div id="timer.app" class="hidden">
                    Welcome to Timer
                </div>
            </div>

        
            <div id="controlBar">
                <button id="backButtonControl">Back</button>
                <button id="homeButtonControl" onclick="switchApps('home');">Home</button>
                <button id="openFridgeToggleButton" onclick="toggleFridgeOpen();">Open Fridge</button>
                <span id="temperatureControls">
                    <span>Fridge Temperature: </span>
                    <button class="circularControlButton" onclick="adjustFridgeTemperature(-1)"> &lt; </button>
                    <span id="fridgeTemperatureDisplay" onclick="toggleTemperatureUnits();">
                        <span id="fridgeTemperature">33</span>&#x00b0;<span class="temperatureUnits">F</span>
                    </span>
                    <button class="circularControlButton" onclick="adjustFridgeTemperature(1)"> > </button>
                </span>
        
                <button style="float: right;" onclick="toggleDisplayPower()">Display Power</button>
                <br style="clear: right;">
            </div>
        
        </div>

        <!-- Fridge -->
        <!-- <div id="fridge">
            <img id="fridgeImage" src="https://i.pinimg.com/originals/ce/53/20/ce5320d6c5c0473084181cc6e99547f4.png" 
                alt="An image of a fridge">
        </div>
        
        <!- TV and Browser ->
        <div id="entertainmentColumn">

            <!- TV Set ->
            <div id="televisionSet">
                <div id="televisionImage"><iframe src="https://youtube.com/embed/jfKfPfyJRdk"></iframe></div>
                &#x1f7e2;
            </div>

            <!- Browser/Search Box ->
            <div id="browser">
                <img id="googleLogo" src="https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png"
                    alt="Google Search Logo"><br>
                <br>
                <input id="searchBarInput" type="text">
                <button id="searchBarButton" onclick="search();">&#x1f50d; Search</button>
            </div>
        </div>

        <br style="clear: both;">
        
    -->
    </main> 
    
    <footer>
        <div id="footerContents">
            <div id="footerText">
                &copy; Brendan Gibbons - 3/10/23
            </div>
            <div id="credits">
                <!-- On click, information about sources for certain information is provided -->
                <button onclick="showCreditsAlert();">Credits</button>
            </div>
            
            <br style="clear: both;">
        </div>
    </footer>


    <script>
        // Global variables for the state of the three elements
        var fridgeIsOpen = false;
        var displayIsOn = true;

        var useCelsiusTemperature = false; 
        var use12HourTime = true;
        var showInformationBar = true;


        /**
         * Sets the clock to tick every second and the temperature to update every
         * two minutes.
         *  
         */
        function setTimers() {
            setClock();
            nwsApi();
            
            // Timer for clock, which updates every second
            setInterval(() => setClock(), 1000);
            
            // Timer for temperature API call, which updates every 2 minutes
            setInterval(() => nwsApi(), 120000);

            // Timer for checking the Play/Pause Status of Spotify
            setInterval(() => spotifyCheckPlayPauseState(), 10)
        }

        /** 
         * Sets the temperature displayed based on the KPOU observation center, 
         * operated by the National Weather Service. Information is obtained using
         * a free-to-use API provided by the National Weather Service.
         * 
         * https://www.weather.gov/documentation/services-web-api
         * 
         * This function is done asynchronously, meaning it's done out of the order specified.
         * API calls can take some amount of time so we use them asynchronously
         *
         * https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON
         * https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing
         * 
         */
         async function nwsApi() {
            const apiURL = "https://api.weather.gov/stations/kpou/observations/latest/";
            // URL to get weather data from Dutchess County Airport Weather Station
            
            console.log("Attempting to call api.weather.gov API...");
            var tempBoxText = document.getElementById("temperatureBoxText");

            try {
                const apiRequest = new Request(apiURL);
                // Request does a new HTTP request
            
                const apiResponse = await fetch(apiRequest);
                // Fetch takes the request and lets us get resources from it (in this case, a JSON file)

                const weather = await apiResponse.json();
                // Stores the response as an object

                var outsideTemperature = weather.properties.temperature.value;


                if (outsideTemperature == undefined) {
                    // Output an error
                    console.error("Error: Could not call api.weather.gov API.");
                    tempBoxText.innerHTML = "<em class='tempError'>No Temperature Data</em>";
                }
                else if (!useCelsiusTemperature) {
                    tempInFahrenheit = tempToFahrenheit(outsideTemperature);
                    // Output the temperature to the site and logs
                    tempBoxText.innerText = tempInFahrenheit;
                    console.log("api.weather.gov: " + tempInFahrenheit + "* F");
                }
                else {
                    tempBoxText.innerText = Math.round(outsideTemperature);
                    console.log("api.weather.gov: " + Math.round(outsideTemperature) + "* C");
                }
            }
            catch {
                console.error("Error: Could not call api.weather.gov API.");
                // Displays an error in standard error output.

                tempBoxText.innerHTML = "<em class='tempError'>No Temperature Data</em>";
                tempBoxText.style.display = "inline";
            }

        }

        function tempToFahrenheit(tempInCelsius) {
            
            return Math.round(tempInCelsius * (9 / 5) + 32);
                // Convert temperature from Celsius to Fahrenheit
        }

        function tempToCelsius(tempInFahrenheit) {
            return Math.round((5/9)*(tempInFahrenheit - 32));
            // Convert temperature from Fahrenheit to Celsius
        }

        /**
         *
         * Sets the time displayed on the clock
         *  
         */
        function setClock() {
            var datetime = new Date(); // Use to get the time.

            let hours = datetime.getHours().toString();
            let isAfternoon = (hours >= 12 ? true : false); // After 12:00:00, it's afternoon.
            let minutes = datetime.getMinutes().toString();
            let seconds = datetime.getSeconds().toString();

            if (use12HourTime) {
                // If it's the hour of 12 or 0, change it to a 12
                if (hours % 12 == 0) {
                    hours = 12;
                }
                else {
                    // Otherwise change it to the 12-hour fomat of the time
                    hours = hours % 12;
                }
            }

            // Set time in 12-hour format
            let clock = hours + ":" + minutes.padStart(2, "0") + ":" + seconds.padStart(2, "0");

            if (isAfternoon) {
                // Append pm to the time
                clock = clock + " pm";
            }
            else {
                // Append am to the time
                clock = clock + " am";
            }

            
            let timeText = document.getElementById("timeText");

            // Display the time
            timeText.innerText = clock;
        }

        function toggle12HourTime () {

            if (use12HourTime) {
                use12HourTime = false;
            }
            else {
                use12HourTime = true;
            }

            setClock();
        }

        /**
         * Shows and hides the fridge 
         * 
         */
        function toggleFridgeOpen() {
            var button = document.getElementById("openFridgeToggleButton");

            if (!fridgeIsOpen) {

                // Hide the information, home, and back buttons, as well as the currently 
                // active app.
                let informationBar = document.getElementById('informationBar');
                informationBar.classList.add('hidden');

                let homeButton = document.getElementById('homeButtonControl');
                homeButton.classList.add('hidden');

                let backButton = document.getElementById('backButtonControl');
                backButton.classList.add('hidden');

                let suspendedApps = document.getElementsByClassName('activeApp');

                let i = 0;
                while (i < suspendedApps.length) {
                    suspendedApps[i].classList.add('hidden');
                    i++;
                }

                let screen = document.getElementById('screen');
                screen.style.backgroundImage = 'url("img/fridgeOpen.jpeg")';
                // https://stackoverflow.com/questions/24208607/how-do-i-use-a-local-file-as-a-background-image-with-css


                fridgeIsOpen = true;

                console.log("Toggled Fridge to Open State");
                button.innerText = "Close Fridge";
            }
            else {

                // If the display was on, unhide all suspended apps, and hidden 
                // interface elements.
                if (displayIsOn) {
                    let informationBar = document.getElementById('informationBar');
                    informationBar.classList.remove('hidden');

                    let homeButton = document.getElementById('homeButtonControl');
                    homeButton.classList.remove('hidden');

                    let backButton = document.getElementById('backButtonControl');
                    backButton.classList.remove('hidden');

                    let suspendedApps = document.getElementsByClassName('activeApp');

                    let i = 0;
                    while (i < suspendedApps.length) {
                        suspendedApps[i].classList.remove('hidden');
                        i++;
                    }
                }

                let screen = document.getElementById('screen');
                screen.style.backgroundImage = 'none';

                fridgeIsOpen = false;

                console.log("Toggled Fridge to Closed State");
                button.innerText = "Open Fridge";
            }

        }

        // /**
        //  * Shows and hides the television set 
        //  * 
        //  */
        // function toggleTelevisionPower() {
        //     var button = document.getElementById("televisionPowerButton");

        //     if (televisionIsOn) {
        //         console.log("Toggled Television Button to Off");
        //         button.innerHTML = "&#x2b55; Television";
        //         televisionIsOn = false;

        //         // Disable the television and make it invisible
        //         var television = document.getElementById("televisionSet");

        //         television.style.opacity = 0;
        //         television.style.display = "none";
                
        //     }
        //     else {
        //         console.log("Toggled Television Button to On");
        //         button.innerHTML = "&#x1f7e2; Television";
        //         televisionIsOn = true;

        //         // Enable the television and make it visible
        //         var television = document.getElementById("televisionSet");

        //         television.style.opacity = 1;
        //         television.style.display = "block";
        //     }
            
        // }        

        /**
         * Redirects the user to the Google Search page supplied in the search box. 
         * 
         */
        function search() {
            var searchBar = document.getElementById("searchBarInput");
            searchQuery = searchBar.value.trim(); // Get the entered search query

            // The search only executes if there is text put into the query.
            if (searchQuery != "") {
                console.log("Searching on Google for " + searchQuery);
                
                // URL Encoding function found at https://stackoverflow.com/questions/332872/encode-url-in-javascript
                window.location.href = "https://www.google.com/search?q=" + encodeURIComponent(searchQuery);
            }
        }

        /**
         * Displays information about the main resources used in the creation of the
         * application.
         *  
         */
        function showCreditsAlert() {

            const credits = "Here is a list of links to some resources I used for reference:\n\n" 
                                + "API Calls: https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON \n\n"
                                + "URL Encoding Function: https://stackoverflow.com/questions/332872/encode-url-in-javascript \n\n"
                                + "National Weather Service API: https://api.weather.gov/stations/kpou/observations/latest/ \n"
                                + "https://www.weather.gov/documentation/services-web-api \n\n"
                                + "Guidance on height and width CSS: https://stackoverflow.com/questions/36253760/how-to-limit-max-width-and-height-to-screen-size-in-css \n\n"
                                + "Radial Gradients: https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/radial-gradient \n\n"
                                + "Handling iframe clipping: https://www.w3docs.com/snippets/css/how-to-scale-the-content-of-iframe-element.html \n\n"
                                + "LoFi Girl Stream (Video Shown on TV): https://youtu.be/jfKfPfyJRdk \n\n"
                                + "Revolve - cinematrik (song), used under Creative Commons Noncommercial Sampling Plus: https://ccmixter.org/files/hisboyelroy/430 \n"
                                + "To learn more about CC Noncommercial Sampling Plus, read here: https://creativecommons.org/licenses/nc-sampling+/1.0/ ";

            alert(credits);

        }

        function scaleDisplay() {
            let displayUnit = document.getElementById("fridgeDisplayUnit");
            let displayWidth = displayUnit.scrollWidth;

            // Maintain 2 by 1 aspect ratio
            displayUnit.style.height = displayWidth / 2 + "px";

        }

        function adjustFridgeTemperature(adjustmentMagnitude) {
            let fridgeTemp = document.getElementById("fridgeTemperature");

            let fridgeTempAsNumber = parseInt(fridgeTemp.innerText);
            let adjustmentMagnitudeAsNumber = parseInt(adjustmentMagnitude);

            console.log("Adjusting the fridge's temperature by " + adjustmentMagnitudeAsNumber);

            // Add or subtract the amount to be changed.
            fridgeTemp.innerText = fridgeTempAsNumber + adjustmentMagnitudeAsNumber; 
        }

        function toggleTemperatureUnits() {
            let unitRepresentation = document.getElementsByClassName("temperatureUnits");

            let fridgeTemp = document.getElementById("fridgeTemperature");

            if (useCelsiusTemperature) {
                // Convert the current fridge temperature to Fahrenheit
                fridgeTemp.innerText = tempToFahrenheit(fridgeTemp.innerText);
                
                useCelsiusTemperature = false;
                // Update outside temperature
                nwsApi();
                
                // Change all temperatures to use Fahrenheit units
                for (i in unitRepresentation) {
                    unitRepresentation[i].innerText = "F";
                }
            }
            else {
                // Convert the fridge temperature to Celsius
                fridgeTemp.innerText = tempToCelsius(fridgeTemp.innerText);

                useCelsiusTemperature = true;
                // Update outside temperature.
                nwsApi();

                // Change all temperatures to use Celsius units
                for (i in unitRepresentation) {
                    unitRepresentation[i].innerText = "C";
                }
            }
 
        }

        function switchApps(newApp) {
            let activeApps = document.getElementsByClassName('activeApp');
            let appToOpen = document.getElementById(newApp)

            // Hides all currently active apps using the CSS class 'hidden'
            // Also removes the 'activeApp' class
            while(activeApps.length != 0) {
                activeApps[0].classList.add('hidden')
                activeApps[0].classList.remove('activeApp')
            } 

            // Apply the 'activeApp' class to the new app
            // Also remove the 'hidden' class
            appToOpen.classList.add('activeApp')
            appToOpen.classList.remove('hidden')
            
        }

        function toggleDisplayPower() {    

            if (fridgeIsOpen) {
                // If the fridge is open, the display will already be "off", in a way
                // So there is no need to toggle the fridge display power
                return;
            }

            if (displayIsOn) {

                let informationBar = document.getElementById('informationBar');
                informationBar.classList.add('hidden');

                let homeButton = document.getElementById('homeButtonControl');
                homeButton.classList.add('hidden');

                let backButton = document.getElementById('backButtonControl');
                backButton.classList.add('hidden');

                let suspendedApps = document.getElementsByClassName('activeApp');

                let i = 0;
                while (i < suspendedApps.length) {
                    suspendedApps[i].classList.add('hidden');
                    i++;
                }

                let screen = document.getElementById('screen');
                screen.style.backgroundColor = '#000000';

                displayIsOn = false;
            }
            else {

                let informationBar = document.getElementById('informationBar');
                informationBar.classList.remove('hidden');

                let homeButton = document.getElementById('homeButtonControl');
                homeButton.classList.remove('hidden');

                let backButton = document.getElementById('backButtonControl');
                backButton.classList.remove('hidden');

                let suspendedApps = document.getElementsByClassName('activeApp');

                let i = 0;
                while (i < suspendedApps.length) {
                    suspendedApps[i].classList.remove('hidden');
                    i++;
                }

                let screen = document.getElementById('screen');
                screen.style.backgroundColor = '#1e1e1e';

                displayIsOn = true;
            }
        }

        function spotifyPlayPause() {
            let playPauseButton = document.getElementById('spotifyPlayButton');
            let spotifyMusicSource = document.getElementById('spotifyMusicSource');


            let logString = "spotify.app: Music ";

            if (!spotifyMusicSource.paused) {

                // playPauseButton.setAttribute('src', 'img/mediaControl/control_Play.png');
                spotifyMusicSource.pause();

                logString += "was paused"
            }
            else {
                // playPauseButton.setAttribute('src', 'img/mediaControl/control_Pause.png');
                spotifyMusicSource.play();

                logString += "started playing"
            }

            // Print console log message
            console.log(logString);

        }

        function spotifyCheckPlayPauseState() {
            let spotifyMusicSource = document.getElementById('spotifyMusicSource');
            let playPauseButton = document.getElementById('spotifyPlayButton');

            if (spotifyMusicSource.paused || spotifyMusicSource.ended) {
                playPauseButton.setAttribute('src', 'img/mediaControl/control_Play.png');
            }
            else {
                playPauseButton.setAttribute('src', 'img/mediaControl/control_Pause.png');
            }
        }

        function tvLoadPrep () {
            let spotifyMusicSource = document.getElementById('spotifyMusicSource');

            if (!spotifyMusicSource.paused && !spotifyMusicSource.ended) {
                spotifyMusicSource.pause();
                console.log("tv.app: Music from other applications was paused.");
            }

            

        }

        // function collapseInformationBar() {
        //     let informationBar = document.getElementById('informationBar');
        //     let screenContents = document.getElementById('screenContents');

        //     informationBar.classList.add('collapsed');
        //     informationBar.style.fontSize = "0pt";
        //     screenContents.style.height = '92%';
        //     screenContents.style.top = '0%';

        //     showInformationBar = false;
        // }


        

    </script>

</body>



</html>